<table class='table table-hover table-inverse'>
  <thead>
    <tr>
      <th></th>
      <th>Title</th>
      <th>Opinion</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% books.each do |book| %>
      <tr>
        <td>
          <%= link_to user_path(book.user) do %>
          <%= image_tag book.user.get_profile_image, size: '50x50' %>
          <% end %>
        </td>
        <td><%= link_to book.title,book %></td>
        <td><%= book.body %></td>

          <% if book.favorited_by?(current_user) %>
           <td>
               <%= link_to book_favorites_path(book), method: :delete do %>
                <i class="far fa-heart like-btn"></i>
                <%= book.favorites.count %>
               <% end %>
           </td>
           <% else %>
            <td>
              <%= link_to book_favorites_path(book), method: :post do %>
               <i class="far fa-heart unlike-btn"></i>
               <%= book.favorites.count %>
              <% end %>
            </td>
          <% end %>
          <td><P>コメント数<%= book.book_comments.count %></td></p>
          <td>フォロー数: <%= book.user.followings.count %></td>
          <td>フォロワー数: <%= book.user.followers.count %></td>
          <td>
          <% unless current_user == user %> <%#現在ログインしているユーザーのプロフィールは、フォロー、フォロー解除のボタンが出ないようにする。%>
           <% if current_user.following?(user) %>
            <%= link_to "フォロー外す", user_relationships_path(book.user_id), method: :delete %>
           <% else %>
            <%= link_to "フォローする", user_relationships_path(book.user_id), method: :post %>
           <% end %>
          <% end %>
          </td>
      </tr>
    <% end %>
  </tbody>
</table>